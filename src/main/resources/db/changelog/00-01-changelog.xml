<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                      http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.23.xsd">
    <changeSet id="221220230607" author="alex">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                SELECT count(*) FROM information_schema.tables WHERE table_name = 'RULES_CHAT_TO_CHAT';
            </sqlCheck>
        </preConditions>
        <comment>create RULES_CHAT_TO_CHAT</comment>
        <sql><![CDATA[
            create table if not exists RULES_CHAT_TO_CHAT
            (
                RULE_NAME TEXT PRIMARY KEY,
                DATA_JSON TEXT
            );
            ]]>
        </sql>

    </changeSet>
    <changeSet id="221220230724" author="alex">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                SELECT count(*) FROM information_schema.tables WHERE table_name = 'BOT_SERVERS';
            </sqlCheck>
        </preConditions>
        <comment>create BOT_SERVERS</comment>
        <sql><![CDATA[
            create table if not exists BOT_SERVERS
            (
                NAME_SERVER TEXT PRIMARY KEY,
                ADDRESS TEXT
            );
            ]]>
        </sql>

    </changeSet>
    <changeSet id="251220231045" author="alex">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                SELECT count(*) FROM information_schema.tables WHERE table_name = 'MESSAGES';
            </sqlCheck>
        </preConditions>
        <comment>create MESSAGES</comment>
        <sql><![CDATA[
            create table if not exists MESSAGES
            (
                ID BIGSERIAL PRIMARY KEY,
                MESSAGE_JSON TEXT,
                IS_NO_TRY_SEND BOOLEAN,
                DATETIME_INSERT TIMESTAMP
            );
            ]]>
        </sql>

    </changeSet>
    <changeSet id="291220231023" author="alex">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                SELECT count(*) FROM information_schema.tables WHERE table_name = 'ERROR_SEND_MESSAGE';
            </sqlCheck>
        </preConditions>
        <comment>create ERROR_SEND_MESSAGE</comment>
        <sql><![CDATA[
            create table if not exists ERROR_SEND_MESSAGE
            (
                ID BIGSERIAL PRIMARY KEY,
                ID_MESSAGE BIGINT,
                TEXT_ERROR_SEND TEXT,
                DATETIME_ERROR TIMESTAMP
            );
            ]]>
        </sql>

    </changeSet>
    <changeSet id="291220231510" author="alex">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                SELECT count(*) FROM information_schema.tables WHERE table_name = 'SEND_MESSAGE';
            </sqlCheck>
        </preConditions>
        <comment>create ERROR_SEND_MESSAGE</comment>
        <sql><![CDATA[
            create table if not exists SEND_MESSAGE
            (
                ID BIGSERIAL PRIMARY KEY,
                ID_MESSAGE BIGINT,
                ID_MESSAGE_IN_MESSENGER BIGINT,
                DATETIME_SEND TIMESTAMP
            );
            ]]>
        </sql>

    </changeSet>
    <changeSet id="301220231434" author="alex">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                SELECT count(*) FROM information_schema.tables WHERE table_name = 'RECEIVED_MESSAGE';
            </sqlCheck>
        </preConditions>
        <comment>create RECEIVED_MESSAGE</comment>
        <sql><![CDATA[
            create table if not exists RECEIVED_MESSAGE
            (
                ID BIGSERIAL PRIMARY KEY,
                MESSAGE_JSON TEXT,
                IS_PROCESSED BOOLEAN,
                DATETIME_RECEIVED TIMESTAMP
            );
            ]]>
        </sql>

    </changeSet>
</databaseChangeLog>